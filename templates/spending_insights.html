<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spending Insights</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Spending Insights</h1>

        <div class="row mt-4">
            <div class="col-md-6">
                <canvas id="categoryChart"></canvas>
            </div>
            <div class="col-md-6">
                <canvas id="monthChart"></canvas>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-12">
                <canvas id="weekChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Data for spending by category
        var categoryData = {
            labels: {{ spending_by_category | map(attribute='category') | list | tojson }},
            datasets: [{
                label: 'Spending by Category',
                data: {{ spending_by_category | map(attribute='total') | list | tojson }},
                backgroundColor: ['#ff6384', '#36a2eb', '#cc65fe', '#ffce56'],
            }]
        };

        var categoryChart = new Chart(document.getElementById('categoryChart'), {
            type: 'pie',
            data: categoryData
        });

        // Data for spending by month
        var monthData = {
            labels: {{ spending_by_month | map(attribute='month') | list | tojson }},
            datasets: [{
                label: 'Spending by Month',
                data: {{ spending_by_month | map(attribute='total') | list | tojson }},
                backgroundColor: '#36a2eb'
            }]
        };

        var monthChart = new Chart(document.getElementById('monthChart'), {
            type: 'line',
            data: monthData
        });

        // Data for spending by week
        var weekData = {
            labels: {{ spending_by_week | map(attribute='week') | list | tojson }},
            datasets: [{
                label: 'Spending by Week',
                data: {{ spending_by_week | map(attribute='total') | list | tojson }},
                backgroundColor: '#ff6384'
            }]
        };

        var weekChart = new Chart(document.getElementById('weekChart'), {
            type: 'line',
            data: weekData
        });
    </script>
</body>
</html>
